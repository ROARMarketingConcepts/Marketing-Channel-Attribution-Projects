---
title: "Marketing Channel Attribution - Markov Chains"
author: "Ken Wood"
date: "7/24/2020"
output: html_document
---

```{r}

library(ChannelAttribution)

# Read in the CSV file generated by the Python script
df <- read.csv('Paths.csv')

# Select only the necessary columns
df <- df[c(1,2)]

# Run the Markov Model function
M <- markov_model(df, 'Path', var_value = 'Conversion', var_conv = 'Conversion', sep = '>', order=1, out_more = TRUE)

# Export the Markov model output to a csv file, to be read back into Python
write.csv(M$result, file = "Markov - Output - Conversion values.csv", row.names=FALSE)

#Output the transition matrix as well, for visualization purposes
write.csv(M$transition_matrix, file = "Markov - Output - Transition matrix.csv", row.names=FALSE)
```

